<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Batalha Naval Matemática</title>
    <style>
        :root {
            --azul-claro: #e3f2fd;
            --azul-marinho: #0d47a1;
            --vermelho-explosao: #d32f2f;
            --cinza-agua: #b0bec5;
            --branco: #ffffff;
        }

        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #333;
        }

        h1 { margin-top: 20px; color: var(--azul-marinho); }

        /* Painel de Informações */
        .placar {
            display: flex;
            gap: 20px;
            background: var(--branco);
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .item-placar { text-align: center; }
        .item-placar label { display: block; font-size: 12px; font-weight: bold; color: #666; }
        .item-placar span { font-size: 20px; color: var(--azul-marinho); font-weight: bold; }

        /* Grade do Jogo */
        .grade {
            display: grid;
            grid-template-columns: repeat(6, 60px);
            gap: 10px;
            padding: 15px;
            background: var(--branco);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
        }

        .quadrado {
            width: 60px;
            height: 60px;
            background-color: var(--azul-claro);
            border: 1px solid #bbdefb;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .quadrado:hover {
            background-color: #bbdefb;
            transform: scale(1.05);
        }

        /* Ícone de ACERTO (Navio destruído) */
        .quadrado.acerto {
            background-color: #ffebee;
            border-color: var(--vermelho-explosao);
        }
        .quadrado.acerto::after {
            content: "";
            width: 25px;
            height: 15px;
            background: var(--vermelho-explosao);
            border-radius: 0 0 10px 10px; /* Formato de casco de navio */
            box-shadow: 0 -8px 0 -2px var(--vermelho-explosao); /* Chaminé/Fumaça */
        }

        /* Ícone de ERRO (Água/X) */
        .quadrado.erro {
            background-color: #eceff1;
            border-color: var(--cinza-agua);
        }
        .quadrado.erro::after {
            content: "X";
            font-weight: bold;
            color: var(--cinza-agua);
            font-size: 24px;
        }

        /* Modal de Pergunta */
        .overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .modal {
            background: var(--branco);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            width: 280px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .modal h2 { margin-top: 0; font-size: 18px; }
        .conta { font-size: 36px; font-weight: bold; margin: 20px 0; color: var(--azul-marinho); }
        input {
            width: 100%;
            padding: 10px;
            font-size: 20px;
            border: 2px solid #ddd;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            box-sizing: border-box;
        }

        button {
            width: 100%;
            padding: 12px;
            background: var(--azul-marinho);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
        }

        button:hover { background: #1565c0; }
    </style>
</head>
<body>

    <h1>Batalha Naval</h1>
    
    <div class="placar">
        <div class="item-placar">
            <label>PONTOS</label>
            <span id="txt-pontos">0</span>
        </div>
        <div class="item-placar">
            <label>VIDAS</label>
            <span id="txt-vidas">5</span>
        </div>
        <div class="item-placar">
            <label>NAVIOS</label>
            <span id="txt-navios">6</span>
        </div>
    </div>

    <div class="grade" id="grade-jogo"></div>

    <div class="overlay" id="painel-pergunta">
        <div class="modal">
            <h2>Resolva a conta:</h2>
            <div class="conta" id="campo-conta">3 x 4</div>
            <input type="number" id="input-resposta" placeholder="Resultado">
            <button onclick="disparar()">DISPARAR!</button>
        </div>
    </div>

    <script>
        const grade = document.getElementById('grade-jogo');
        const painel = document.getElementById('painel-pergunta');
        const input = document.getElementById('input-resposta');
        
        let pontos = 0;
        let vidas = 5;
        let navios = 6;
        let alvoAtual = null;

        // Criar o tabuleiro 6x6
        const mapa = [];
        for (let i = 0; i < 36; i++) {
            const n1 = Math.floor(Math.random() * 9) + 1;
            const n2 = Math.floor(Math.random() * 9) + 1;
            mapa.push({
                pergunta: `${n1} x ${n2}`,
                resp: n1 * n2,
                temNavio: Math.random() < 0.25, // 25% de chance de navio
                status: 'vazio'
            });
        }

        function desenhar() {
            grade.innerHTML = '';
            mapa.forEach((casa, i) => {
                const btn = document.createElement('div');
                btn.className = 'quadrado ' + casa.status;
                btn.onclick = () => clicarCasa(i);
                grade.appendChild(btn);
            });
        }

        function clicarCasa(i) {
            if (mapa[i].status !== 'vazio' || vidas <= 0) return;
            alvoAtual = i;
            document.getElementById('campo-conta').innerText = mapa[i].pergunta;
            painel.style.display = 'flex';
            input.value = '';
            input.focus();
        }

        function disparar() {
            const resposta = parseInt(input.value);
            const alvo = mapa[alvoAtual];

            if (resposta === alvo.resp) {
                if (alvo.temNavio) {
                    alvo.status = 'acerto';
                    pontos += 100;
                    navios--;
                } else {
                    alvo.status = 'erro';
                    pontos += 10;
                }
            } else {
                vidas--;
                alert("Errou a conta! O resultado era " + alvo.resp);
                alvo.status = 'erro'; // Penalidade: perde a casa
            }

            painel.style.display = 'none';
            atualizarUI();
            desenhar();
            verificarFim();
        }

        function atualizarUI() {
            document.getElementById('txt-pontos').innerText = pontos;
            document.getElementById('txt-vidas').innerText = vidas;
            document.getElementById('txt-navios').innerText = navios;
        }

        function verificarFim() {
            setTimeout(() => {
                if (navios === 0) {
                    alert("PARABÉNS! Você venceu a batalha!");
                    location.reload();
                } else if (vidas <= 0) {
                    alert("GAME OVER! Sua frota foi destruída.");
                    location.reload();
                }
            }, 300);
        }

        // Detectar tecla Enter no input
        input.addEventListener("keyup", function(event) {
            if (event.key === "Enter") disparar();
        });

        desenhar();
    </script>
</body>
</html>