<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NeuroWorkspace Professional v7.0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <style>
        :root {
            --primary: #2563eb; --bg: #f8fafc; --surface: #ffffff;
            --text: #0f172a; --border: #e2e8f0; --success: #10b981; 
            --accent: #38bdf8; --error: #ef4444; --dark-blue: #1e293b;
        }

        body { margin: 0; font-family: 'Inter', system-ui, sans-serif; background: var(--bg); color: var(--text); display: flex; height: 100vh; overflow: hidden; }

        /* Sidebar */
        .sidebar { width: 260px; background: var(--dark-blue); color: white; padding: 20px; flex-shrink: 0; display: flex; flex-direction: column; }
        .sidebar h2 { color: var(--accent); font-size: 1.1rem; margin-bottom: 25px; border-bottom: 1px solid #334155; padding-bottom: 10px; }
        .nav-item { padding: 12px; border-radius: 8px; cursor: pointer; margin-bottom: 8px; transition: 0.2s; display: flex; align-items: center; gap: 10px; font-weight: 500; font-size: 0.95rem; }
        .nav-item:hover { background: #334155; }
        .nav-item.active { background: var(--primary); box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); }

        /* Main Content */
        .main { flex-grow: 1; padding: 25px; overflow-y: auto; position: relative; }
        .tab-content { display: none; max-width: 900px; margin: 0 auto; }
        .tab-content.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* Card e Layouts Gen√©ricos */
        .card { background: var(--surface); border-radius: 16px; padding: 20px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.05); border: 1px solid var(--border); }

        /* TOAST LIKE */
        .toast {
            position: fixed; top: 20px; right: 20px; background: var(--success); color: white;
            padding: 15px 30px; border-radius: 50px; font-weight: 800; box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            display: none; z-index: 1000; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popIn { from { transform: scale(0.5) translateY(-50px); opacity: 0; } to { transform: scale(1) translateY(0); opacity: 1; } }

        /* ESTILO BATALHA NAVAL */
        .grade-naval { display: grid; gap: 8px; background: #e0f2fe; padding: 15px; border-radius: 15px; margin: 0 auto; width: fit-content; }
        .casa-naval { width: 50px; height: 50px; background: white; border-radius: 8px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 20px; transition: 0.2s; border: 1px solid #bae6fd; }
        .casa-naval.acerto { background: #fee2e2; color: var(--error); border-color: var(--error); }
        .casa-naval.erro { background: #dcfce7; color: var(--success); border-color: var(--success); }

        /* ESTILO MATH HUNT */
        .math-hunt-grid { display: grid; grid-template-columns: repeat(6, 55px); gap: 8px; justify-content: center; }
        .cell-hunt { background: white; border: 2px solid var(--border); border-radius: 8px; height: 55px; display: flex; align-items: center; justify-content: center; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .cell-hunt.correct { background: var(--success) !important; color: white; transform: scale(1.1); }
        .cell-hunt.wrong { background: var(--error) !important; color: white; animation: shake 0.3s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-5px); } 75% { transform: translateX(5px); } }

        /* Overlay Modal */
        .overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); align-items: center; justify-content: center; z-index: 2000; }
        .modal { background: white; padding: 30px; border-radius: 20px; text-align: center; width: 300px; }
        .modal input { width: 100%; padding: 12px; font-size: 24px; text-align: center; margin: 15px 0; border: 2px solid var(--border); border-radius: 10px; }
        
        .btn-primary { background: var(--primary); color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; }
    </style>
</head>
<body ng-app="NeuroApp" ng-controller="MainCtrl">

<div id="toast" class="toast">üëç Mandou bem!</div>

<div class="sidebar">
    <h2>üß† NeuroWorkspace</h2>
    <div class="nav-item active" onclick="switchTab('tab-naval')"><i class="fa-solid fa-ship"></i> Batalha Naval</div>
    <div class="nav-item" onclick="switchTab('tab-hunt')"><i class="fa-solid fa-bullseye"></i> Math Hunt</div>
    <div style="margin-top:auto; background: #334155; padding: 15px; border-radius: 12px;">
        <small style="opacity:0.7">SCORE GLOBAL</small><br>
        <strong style="font-size: 1.2rem;">{{ globalScore }} pts</strong>
    </div>
</div>

<div class="main">
    
    <div id="tab-naval" class="tab-content active">
        <div class="card">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                <h3>Opera√ß√£o Naval: {{ navalStatus }}</h3>
                <div>
                    <span style="margin-right:15px"><i class="fa-solid fa-heart" style="color:var(--error)"></i> {{ navalVidas }}</span>
                    <span><i class="fa-solid fa-crosshairs"></i> {{ navalBaixas }}</span>
                </div>
            </div>

            <div class="grade-naval" id="gridNaval">
                </div>
            
            <div style="margin-top:20px; text-align:center;">
                <button class="btn-primary" style="width:auto;" onclick="resetNaval()">Reiniciar Oceano</button>
            </div>
        </div>
    </div>

    <div id="tab-hunt" class="tab-content">
        <div class="card">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                <div>
                    <small>ENCONTRE O TOTAL</small>
                    <h2 style="margin:0; color:var(--primary)">{{ n1 }} + {{ n2 }}</h2>
                </div>
                <div style="text-align:right">
                    <span>N√≠vel: {{ huntLevel }}</span><br>
                    <span>Tempo: {{ tempo }}s</span>
                </div>
            </div>

            <div class="math-hunt-grid">
                <div ng-repeat="item in gradeHunt" 
                     class="cell-hunt" 
                     ng-class="{'correct': item.acertou, 'wrong': item.errou}"
                     ng-click="verificarHunt(item)">
                    {{ item.valor }}
                </div>
            </div>
        </div>
    </div>

</div>

<div id="overlayNaval" class="overlay">
    <div class="modal">
        <h3>Calcule para atirar:</h3>
        <div id="contaNaval" style="font-size: 32px; font-weight: bold; margin: 10px 0;"></div>
        <input type="number" id="respNaval" placeholder="?">
        <button class="btn-primary" onclick="dispararNaval()">DISPARAR!</button>
    </div>
</div>

<script>
    function switchTab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    // Feedback Visual Global
    function showLike(msg) {
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 } });
        const t = document.getElementById('toast');
        t.innerText = "üëç " + (msg || "Excelente!");
        t.style.display = 'block';
        setTimeout(() => t.style.display = 'none', 2000);
    }

    // --- L√ìGICA BATALHA NAVAL (Vanilla JS) ---
    let navalVidas = 12;
    let navalBaixas = 0;
    let mapaNaval = [];
    let alvoNavalIndex = null;

    function resetNaval() {
        navalVidas = 12; navalBaixas = 0; mapaNaval = [];
        const grid = document.getElementById('gridNaval');
        grid.style.gridTemplateColumns = `repeat(5, 50px)`;
        grid.innerHTML = '';
        for(let i=0; i<25; i++) {
            let n1 = Math.floor(Math.random()*10)+1, n2 = Math.floor(Math.random()*10)+1;
            mapaNaval.push({ q: `${n1} + ${n2}`, r: n1+n2, temNavio: Math.random() < 0.3, status: 'mar' });
            let casa = document.createElement('div');
            casa.className = 'casa-naval';
            casa.id = 'casa-' + i;
            casa.innerHTML = '<i class="fa-solid fa-water" style="opacity:0.2; font-size:12px"></i>';
            casa.onclick = () => abrirModalNaval(i);
            grid.appendChild(casa);
        }
        document.getElementById('vds').innerText = navalVidas; 
    }

    function abrirModalNaval(i) {
        if(mapaNaval[i].status !== 'mar') return;
        alvoNavalIndex = i;
        document.getElementById('contaNaval').innerText = mapaNaval[i].q;
        document.getElementById('overlayNaval').style.display = 'flex';
        document.getElementById('respNaval').focus();
    }

    function dispararNaval() {
        let resp = parseInt(document.getElementById('respNaval').value);
        let alvo = mapaNaval[alvoNavalIndex];
        let casaDiv = document.getElementById('casa-' + alvoNavalIndex);

        if(resp === alvo.r) {
            if(alvo.temNavio) {
                alvo.status = 'acerto';
                casaDiv.className = 'casa-naval acerto';
                casaDiv.innerHTML = '<i class="fa-solid fa-explosion"></i>';
                navalBaixas++;
                showLike("Alvo atingido!");
            } else {
                alvo.status = 'erro';
                casaDiv.className = 'casa-naval erro';
                casaDiv.innerHTML = '<i class="fa-solid fa-droplet"></i>';
            }
        } else {
            navalVidas -= 2;
            alert("Errou o c√°lculo! O inimigo contra-atacou.");
        }
        document.getElementById('overlayNaval').style.display = 'none';
        document.getElementById('respNaval').value = '';
    }

    // --- L√ìGICA MATH HUNT (AngularJS) ---
    var app = angular.module('NeuroApp', []);
    app.controller('MainCtrl', function($scope, $interval, $timeout) {
        $scope.globalScore = 0;
        $scope.huntLevel = 1;
        $scope.tempo = 90;

        $scope.gerarHunt = function() {
            $scope.n1 = Math.floor(Math.random() * (5 * $scope.huntLevel)) + 1;
            $scope.n2 = Math.floor(Math.random() * (5 * $scope.huntLevel)) + 1;
            let resp = $scope.n1 + $scope.n2;
            $scope.gradeHunt = [];
            for(let i=0; i<36; i++) {
                $scope.gradeHunt.push({ valor: Math.floor(Math.random() * (resp + 15)), acertou: false, errou: false });
            }
            $scope.gradeHunt[Math.floor(Math.random()*36)].valor = resp;
        };

        $scope.verificarHunt = function(item) {
            if(item.valor === ($scope.n1 + $scope.n2)) {
                item.acertou = true;
                $scope.globalScore += 10;
                $scope.huntLevel++;
                showLike("Perfeito!");
                $timeout(() => $scope.gerarHunt(), 600);
            } else {
                item.errou = true;
                $timeout(() => item.errou = false, 300);
                $scope.tempo -= 3;
            }
        };

        $interval(() => { if($scope.tempo > 0) $scope.tempo--; }, 1000);
        $scope.gerarHunt();
    });

    window.onload = resetNaval;
</script>
</body>
</html>